# Currently requires the `develop` branch of Fabrikate
# This component DOES NOT do automatic sidecar injection; only on namespaces labelled `istio-injection: enabled`
# To enable automatic sidecare injection:
# - kubectl edit mutatingwebhookconfiguration istio-sidecar-injector
# - Remove the namespaceSelector
name: istio-system
generator: static
path: "./manifests"
hooks:
  before-install:
    - wget https://github.com/istio/istio/releases/download/1.0.5/istio-1.0.5-linux.tar.gz
    - tar xvf istio-1.0.5-linux.tar.gz -C tmp
  after-install:
    - rm istio-1.0.5-linux.tar.gz
subcomponents:
  - name: istio
    generator: helm
    path: "./tmp/istio-1.0.5/install/kubernetes/helm/istio"
